import{d as t}from"./chunks/versions.data.212e74d8.js";import{o as l,c as o,b as s,d as a,a as p}from"./app.a85cfb4e.js";const c=s("h1",{id:"predicates",tabindex:"-1"},[a("Predicates "),s("a",{class:"header-anchor",href:"#predicates","aria-hidden":"true"},"#")],-1),r=s("p",null,"Predicates, in Sway, are programs that return a Boolean value, and they do not have any side effects (they are pure).",-1),i=s("h2",{id:"instantiating-predicates",tabindex:"-1"},[a("Instantiating predicates "),s("a",{class:"header-anchor",href:"#instantiating-predicates","aria-hidden":"true"},"#")],-1),d=s("code",null,"forc build",-1),y=s("code",null,"predicate",-1),F=p(`<div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Predicate</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">arrayify</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fuels</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> predicate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Predicate</span><span style="color:#A6ACCD;">(testPredicateTrue)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">expect</span><span style="color:#A6ACCD;">(predicate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">address)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBeTruthy</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">expect</span><span style="color:#A6ACCD;">(predicate</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bytes)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toEqual</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">arrayify</span><span style="color:#A6ACCD;">(testPredicateTrue))</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><a class="anchor-link" href="https://github.com/FuelLabs/fuels-ts/blob/master/packages/fuel-gauge/src/doc-examples.test.ts#L339-L345" target="_blank" rel="noreferrer">See code in context </a><hr><p>The created <code>predicate</code> instance has two fields. The predicate <code>bytes (byte code)</code> and the predicate <code>address</code>. This address is generated from the byte code and is the same as the <code>P2SH</code> address used in Bitcoin. Users can seamlessly send assets to the predicate address as they do for any other address on the chain. To spend the predicate funds, the user has to provide the original <code>byte code</code> of the predicate together with the <code>predicate data</code>. The <code>predicate data</code> will be used when executing the <code>byte code</code>, and if the predicate is validated successfully, the funds will be accessible.</p><p>In the next section, we show how to interact with a predicate and explore an example where specific signatures are needed to spend the predicate funds.</p><h2 id="calling-a-predicate-with-a-main-function-that-takes-arguments" tabindex="-1">Calling a predicate with a <code>main</code> function that takes arguments <a class="header-anchor" href="#calling-a-predicate-with-a-main-function-that-takes-arguments" aria-hidden="true">#</a></h2><p>Suppose your Sway predicate <code>main</code> function is written using the arguments passed to the <code>main</code> function like so:</p><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">predicate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">struct Validation </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">has_account</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">bool</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">total_complete</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">u64</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">fn </span><span style="color:#82AAFF;">main</span><span style="color:#A6ACCD;">(received: Validation) </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> bool </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">expected_has_account</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">bool</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">expected_total_complete</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">u64</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">received</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">has_account</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">expected_has_account</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">received</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">total_complete</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">expected_total_complete</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><a class="anchor-link" href="https://github.com/FuelLabs/fuels-ts/blob/master/packages/fuel-gauge/test-projects/predicate-main-args-struct/src/main.sw#L1-L15" target="_blank" rel="noreferrer">See code in context </a><hr><p>You can still create a <code>Predicate</code> in the same way as above, but you can pass in a <code>JsonAbi</code> using the JSON generated from <code>forc</code>.</p>`,11),m=JSON.parse('{"title":"Predicates","description":"","frontmatter":{},"headers":[{"level":2,"title":"Instantiating predicates","slug":"instantiating-predicates","link":"#instantiating-predicates","children":[]},{"level":2,"title":"Calling a predicate with a main function that takes arguments","slug":"calling-a-predicate-with-a-main-function-that-takes-arguments","link":"#calling-a-predicate-with-a-main-function-that-takes-arguments","children":[]}],"relativePath":"guide/predicates/index.md"}'),h={name:"guide/predicates/index.md"},g=Object.assign(h,{setup(u){const{sway:e}=t,n=`https://fuellabs.github.io/sway/v${e}/book/introduction/index.html`;return(D,b)=>(l(),o("div",null,[c,r,i,s("p",null,[a("Similar to contracts, once you've written a predicate in Sway and compiled it with "),d,a(" (read "),s("a",{href:n,target:"_blank",rel:"noreferrer"},"here"),a(" for more on how to work with Sway), you'll get the predicate binary. Using the binary, you can instantiate a "),y,a(" as shown in the code snippet below:")]),F]))}});export{m as __pageData,g as default};
